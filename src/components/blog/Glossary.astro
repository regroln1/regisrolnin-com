---
interface GlossaryTerm {
  term: string;
  definition: string;
}

interface Props {
  terms: GlossaryTerm[];
}

const { terms } = Astro.props;

// Trier par ordre alphabétique
const sortedTerms = [...terms].sort((a, b) => a.term.localeCompare(b.term));

// Grouper par première lettre
const groupedTerms = sortedTerms.reduce((acc, item) => {
  const firstLetter = item.term[0].toUpperCase();
  if (!acc[firstLetter]) {
    acc[firstLetter] = [];
  }
  acc[firstLetter].push(item);
  return acc;
}, {} as Record<string, GlossaryTerm[]>);
---

{terms.length > 0 && (
  <section class="py-16 bg-white">
    <div class="container mx-auto px-6">
      <div class="max-w-5xl mx-auto">
        <div class="text-center mb-12">
          <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl mb-6">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
            </svg>
          </div>
          <h2 class="text-3xl md:text-4xl font-bold text-navy-900 font-crimson mb-4">
            Glossaire
          </h2>
          <p class="text-lg text-gray-600 font-crimson">
            Définitions des termes clés utilisés dans cet article
          </p>
        </div>

        <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-8 md:p-12 shadow-xl">
          {Object.entries(groupedTerms).map(([letter, letterTerms]) => (
            <div class="mb-10 last:mb-0">
              <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mr-4 shadow-lg">
                  <span class="text-2xl font-bold text-white">{letter}</span>
                </div>
                <div class="flex-1 h-px bg-gradient-to-r from-blue-200 to-transparent"></div>
              </div>

              <dl class="space-y-6">
                {letterTerms.map((item) => (
                  <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow duration-300">
                    <dt class="text-xl font-bold text-navy-900 font-crimson mb-3 flex items-start">
                      <span class="w-2 h-2 bg-blue-500 rounded-full mr-3 mt-2 flex-shrink-0"></span>
                      {item.term}
                    </dt>
                    <dd class="text-gray-700 font-crimson leading-relaxed text-lg ml-5">
                      {item.definition}
                    </dd>
                  </div>
                ))}
              </dl>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>
)}