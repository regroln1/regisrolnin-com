---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import SuiteDashForm from '../components/SuiteDashForm.astro';

const sessionBenefits = [
  {
    icon: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",
    title: "Vous identifiez vos blocages principaux",
    description: "Vous comprenez les 2-3 points qui freinent vraiment votre croissance aujourd'hui"
  },
  {
    icon: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",
    title: "Vous savez si c'est fait pour vous",
    description: "Vous avez un diagnostic honn√™te : cette approche correspond-elle √† votre situation"
  },
  {
    icon: "M13 10V3L4 14h7v7l9-11h-7z",
    title: "Vous avez vos premi√®res actions",
    description: "Vous connaissez les 2-3 actions que vous pouvez lancer d√®s cette semaine"
  },
  {
    icon: "M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",
    title: "Vous ma√Ætrisez la suite (si vous voulez continuer)",
    description: "Vous savez exactement comment √ßa se passerait et ce que vous pouvez en attendre"
  }
];

const faqs = [
  {
    question: "√Ä qui s'adresse votre accompagnement ?",
    answer: "Aux dirigeants de PME ambitieuses (10 √† 500 salari√©s) qui veulent clarifier leurs priorit√©s, structurer l'acquisition et automatiser intelligemment."
  },
  {
    question: "Qu'est-ce que j'aurai concr√®tement apr√®s cette session ?",
    answer: "Vous aurez votre diagnostic personnel, vos 3 priorit√©s pour les prochains mois, votre feuille de route 90 jours et une projection r√©aliste de vos r√©sultats. Si √ßa ne colle pas, vous n'allez pas plus loin."
  },
  {
    question: "Comment l'IA est-elle int√©gr√©e dans votre m√©thode ?",
    answer: "Toujours comme un levier strat√©gique : automatiser le r√©p√©titif, mieux exploiter vos donn√©es, et acc√©l√©rer la prise de d√©cision, sans complexit√© inutile."
  },
  {
    question: "Que se passe-t-il apr√®s la session gratuite ?",
    answer: "Vous recevez un bref r√©cap. Si l'ad√©quation est l√†, on planifie la suite. Sinon, aucun engagement."
  },
  {
    question: "Dois-je pr√©parer quelque chose pour la session ?",
    answer: "Id√©alement quelques chiffres cl√©s (CA, objectifs, canaux d'acquisition). Le reste, on s'en occupe."
  }
];
---

<Layout 
  title="Appel strat√©gique 30 min ‚Äì R√©gis Rolnin | Croissance PME"
  description="Un appel de 30 minutes pour clarifier vos priorit√©s, √©viter les erreurs co√ªteuses et voir si nous pouvons travailler ensemble."
  type="website"
>
  <Header />

  <!-- Sticky CTA mobile (apparition apr√®s scroll, cach√© quand le booking est visible) -->
  <div id="sticky-cta" class="fixed bottom-0 left-0 right-0 translate-y-full opacity-0 pointer-events-none transition-all duration-300 sm:hidden z-50">
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 py-3 px-4 flex justify-between items-center" style="padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 12px);">
      <div class="text-white">
        <div class="font-bold">Appel strat√©gique ‚è±Ô∏è</div>
        <div class="text-xs opacity-80">30 min ‚Ä¢ Gratuit ‚Ä¢ Sans engagement</div>
      </div>
      <a href="#contact-form-section" class="bg-amber-400 hover:bg-amber-300 text-navy-900 font-bold py-2 px-4 rounded-full text-sm flex items-center">
        R√©server
        <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
        </svg>
      </a>
    </div>
  </div>

  <main class="pt-16">

    <!-- HERO -->
    <section id="hero" class="relative bg-gradient-to-br from-gray-50 via-white to-blue-50 pb-20">
      <div class="absolute top-20 left-10 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl float-slow"></div>
      <div class="absolute bottom-20 right-10 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl float-medium"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-amber-500/5 rounded-full blur-2xl float-fast"></div>

      <div class="relative z-10 container mx-auto px-4 pt-12 lg:pt-20">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          <div>
            <!-- Badge exclusif -->
            <div class="inline-flex items-center px-4 py-2 bg-white border border-blue-200 rounded-full mb-6">
              <span class="text-sm font-semibold text-blue-600">üöÄ Offre exclusive pour dirigeants</span>
            </div>

            <h1 class="text-4xl md:text-5xl font-bold text-navy-900 mb-6 leading-tight">
              <span class="block mb-3">30 minutes pour d√©couvrir comment transformer</span>
              <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
                la croissance de votre entreprise.
              </span>
            </h1>
            <p class="text-xl text-gray-700 mb-8 max-w-2xl">
              Vous clarifiez vos priorit√©s, √©vitez les erreurs co√ªteuses et d√©couvrez si cette approche vous correspond.
            </p>

            <div class="flex flex-col sm:flex-row gap-4 mb-8">
              <a href="#contact-form-section" class="px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold rounded-full hover:shadow-xl transition-all text-center">
                üìÖ R√©server mon appel d√©couverte
              </a>
            </div>

            <!-- Garantie mise en valeur -->
            <div class="flex items-start p-4 bg-blue-50 rounded-xl border border-blue-100 max-w-md">
              <svg class="w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <div>
                <p class="text-blue-800 font-semibold">Sans engagement</p>
                <p class="text-sm text-blue-700">Session 100% gratuite - Aucune obligation de poursuivre</p>
              </div>
            </div>
          </div>

          <!-- Visuel Ce qui vous attend pendant l'appel -->
          <div class="relative">
            <div class="relative bg-white rounded-2xl shadow-xl p-1 border border-gray-200 transform rotate-3">
              <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl w-full h-96 flex flex-col items-center justify-center p-8 text-center">
                <h3 class="text-xl font-bold text-navy-900 mb-4">Ce qui vous attend pendant l'appel</h3>
                <ol class="space-y-4 text-left text-gray-700 max-w-md">
                  <li class="flex items-start"><span class="bg-blue-100 text-blue-800 w-6 h-6 rounded-full flex items-center justify-center mr-3">1</span>Vous exposez votre situation actuelle</li>
                  <li class="flex items-start"><span class="bg-blue-100 text-blue-800 w-6 h-6 rounded-full flex items-center justify-center mr-3">2</span>Vous d√©couvrez vos leviers de croissance prioritaires</li>
                  <li class="flex items-start"><span class="bg-blue-100 text-blue-800 w-6 h-6 rounded-full flex items-center justify-center mr-3">3</span>Vous repartez avec votre plan d'action personnalis√©</li>
                </ol>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- COMMENT VOUS ALLEZ TRANSFORMER VOTRE PME -->
    <section class="py-16 bg-gradient-to-b from-white to-gray-50">
      <div class="container mx-auto px-4">
        <div class="text-center max-w-2xl mx-auto mb-16">
          <h2 class="text-3xl md:text-4xl font-bold text-navy-900 mb-6">
            Comment vous allez transformer votre PME
          </h2>
          <p class="text-xl text-gray-600">
            Votre parcours de transformation en 3 √©tapes claires
          </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
          <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all">
            <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-6">
              <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-navy-900 mb-4">√âtape 1 : Vous alignez</h3>
            <p class="text-gray-600">Vous clarifiez votre positionnement et ajustez votre offre pour attirer VOS clients id√©aux</p>
          </div>

          <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all">
            <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-6">
              <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-navy-900 mb-4">√âtape 2 : Vous attirez</h3>
            <p class="text-gray-600">Vous installez un syst√®me qui vous am√®ne r√©guli√®rement des clients qualifi√©s</p>
          </div>

          <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all">
            <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-6">
              <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-navy-900 mb-4">√âtape 3 : Vous automatisez</h3>
            <p class="text-gray-600">Vous optimisez vos processus avec l'IA pour gagner du temps et faire grandir votre entreprise</p>
          </div>
        </div>

        <!-- Citation -->
        <div class="text-center mt-16">
          <blockquote class="text-2xl font-medium text-gray-700 italic">
            ¬´ On analyse ensemble votre situation r√©elle, sans langue de bois. ¬ª
          </blockquote>
        </div>
      </div>
    </section>

    <!-- CE QUE VOUS OBTENEZ CONCR√àTEMENT EN 30 MIN -->
    <section class="py-16 bg-navy-900">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-white">Ce que vous obtenez concr√®tement en 30 minutes</h2>
          <p class="text-blue-200 mt-3">Vos r√©sultats concrets, imm√©diatement applicables.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
          {sessionBenefits.map((b) => (
            <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-8">
              <div class="w-14 h-14 bg-blue-500/20 rounded-xl flex items-center justify-center mb-6">
                <svg class="w-8 h-8 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={b.icon}></path>
                </svg>
              </div>
              <h3 class="text-xl font-bold text-white mb-2">{b.title}</h3>
              <p class="text-gray-300">{b.description}</p>
            </div>
          ))}
        </div>
        <div class="text-center mt-10">
          <a href="#contact-form-section" class="inline-block px-8 py-4 bg-white text-navy-900 font-bold rounded-full hover:bg-gray-100">üìÖ R√©server mon appel maintenant</a>
        </div>
      </div>
    </section>

    <!-- BOOKING : formulaire centr√© -->
    <section id="contact-form-section" class="py-16 bg-gradient-to-br from-blue-50 to-white">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden">
          <div class="p-8 lg:p-12 text-center">
            <h3 class="text-3xl font-bold text-navy-900 mb-2">R√©servez votre session</h3>
            <p class="text-gray-600 mb-6">Choisissez un cr√©neau disponible</p>

            <div class="mb-8 p-4 bg-amber-50 rounded-lg border border-amber-200 inline-block">
              <div class="flex items-center">
                <svg class="w-5 h-5 text-amber-600 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <p class="text-amber-700 text-sm">
                  <span class="font-bold">Disponibilit√© limit√©e :</span> 5 sessions / semaine
                </p>
              </div>
            </div>

            <!-- Formulaire SuiteDash centr√© -->
            <div class="max-w-2xl mx-auto">
              <SuiteDashForm
                formUrl="https://acces.regisrolnin.com/frm/22X7MK87WJQxTnzyz"
                height="1700px"
                trustText="üîí Confidentialit√© absolue ‚Äì Vos donn√©es sont s√©curis√©es"
                loadingText="Chargement des disponibilit√©s..."
                containerClass="bg-transparent p-0"
              />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="py-16 bg-white">
      <div class="container mx-auto px-4 max-w-4xl">
        <div class="text-center mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-navy-900">Questions fr√©quentes</h2>
          <p class="text-xl text-gray-600">Tout ce qu'il faut savoir avant votre session</p>
        </div>

        <div class="space-y-4" id="faq-accordion">
          {faqs.map((faq, idx) => (
            <div class="border border-gray-200 rounded-xl overflow-hidden">
              <button
                class="faq-toggle flex justify-between items-center w-full p-6 text-left bg-gray-50 hover:bg-gray-100 transition-colors"
                aria-expanded="false"
                aria-controls={`faq-panel-${idx}`}
              >
                <span class="font-semibold text-lg text-navy-900">{faq.question}</span>
                <svg class="w-6 h-6 text-gray-500 transition-transform duration-300" data-icon="chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              <div id={`faq-panel-${idx}`} class="faq-panel max-h-0 overflow-hidden transition-[max-height] duration-300 ease-in-out">
                <div class="p-6 pt-0 text-gray-700">{faq.answer}</div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- FINAL CTA -->
    <section class="py-16 bg-gray-50">
      <div class="container mx-auto px-4 text-center">
        <h3 class="text-2xl md:text-3xl font-bold text-navy-900 mb-4">üî• Chaque jour compte pour votre croissance</h3>
        <a href="#contact-form-section" class="inline-block px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold rounded-full hover:shadow-xl">üìÖ R√©server mon appel maintenant</a>
      </div>
    </section>

  </main>

  <Footer />
</Layout>

<style>
  .float-slow { animation: float-slow 8s ease-in-out infinite; }
  .float-medium { animation: float-medium 6s ease-in-out infinite; }
  .float-fast { animation: float-fast 4s ease-in-out infinite; }

  @keyframes float-slow { 0%,100%{transform:translateY(0) rotate(0)} 50%{transform:translateY(-20px) rotate(2deg)} }
  @keyframes float-medium { 0%,100%{transform:translateY(0) rotate(0)} 50%{transform:translateY(-15px) rotate(-1deg)} }
  @keyframes float-fast { 0%,100%{transform:translateY(0) rotate(0)} 50%{transform:translateY(-10px) rotate(1deg)} }
</style>

<!-- JS minimal : sticky CTA + FAQ + scroll smooth -->
<script is:inline>
  // Smooth anchor scrolling (iOS friendly)
  document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', (e) => {
      const id = a.getAttribute('href');
      const el = document.querySelector(id);
      if (el) {
        e.preventDefault();
        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });

  // Sticky CTA visibility: appara√Æt apr√®s 400px et se cache quand le booking est √† l'√©cran
  const sticky = document.getElementById('sticky-cta');
  const hero = document.getElementById('hero');
  const booking = document.getElementById('contact-form-section');

  const showSticky = () => {
    sticky.classList.remove('translate-y-full','opacity-0','pointer-events-none');
    sticky.classList.add('translate-y-0','opacity-100');
    sticky.style.pointerEvents = 'auto';
  };
  const hideSticky = () => {
    sticky.classList.add('translate-y-full','opacity-0','pointer-events-none');
    sticky.classList.remove('translate-y-0','opacity-100');
    sticky.style.pointerEvents = 'none';
  };

  let scrolledPast = false;
  window.addEventListener('scroll', () => {
    scrolledPast = window.scrollY > 400;
    if (scrolledPast) showSticky(); else hideSticky();
  }, { passive: true });

  // Cache sticky si booking visible
  if ('IntersectionObserver' in window) {
    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => { if (entry.isIntersecting) hideSticky(); else if (scrolledPast) showSticky(); });
    }, { threshold: 0.1 });
    if (booking) io.observe(booking);
  }

  // FAQ accordion accessible
  const toggles = document.querySelectorAll('.faq-toggle');
  toggles.forEach((btn) => {
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      const panel = document.getElementById(btn.getAttribute('aria-controls'));
      btn.setAttribute('aria-expanded', String(!expanded));
      const icon = btn.querySelector('[data-icon="chevron"]');
      if (!expanded) {
        panel.style.maxHeight = panel.scrollHeight + 'px';
        icon.style.transform = 'rotate(180deg)';
      } else {
        panel.style.maxHeight = '0px';
        icon.style.transform = 'rotate(0deg)';
      }
    });
  });
</script>